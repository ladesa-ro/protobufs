syntax = "proto3";

package Ladesa.TimetableGenerator.v1;

import "value-objects/week-day-dto.proto";
import "value-objects/time-slot-dto.proto";

enum AvailabilityTypeDto {
  Compound = 0;
  UnavailableWeekDay = 1;
  UnavailableWeekDays = 2;
  UnavailableTimeSlot = 3;
  UnavailableSpecificDate = 4;
  UnavailableDateRange = 5;
  UnavailableMonthDay = 6;
  UnavaiableYearMonths = 7;
}

message AvailabilityDto {
  AvailabilityTypeDto type = 1;

  oneof regra {
    AvailabilityCompoundDto compount = 2;
    AvailabilityUnavailableWeekDayDto unavailable_week_day = 3;
    AvailabilityUnavailableWeekDaysDto unavailable_week_days = 4;
    AvailabilityUnavailableTimeSlotDto unavailable_time_slot = 5;
    AvailabilityUnavailableSpecificDateDto unavailable_specific_date = 6;
    AvailabilityUnavailableDateRangeDto unavailable_date_range = 7;
    AvailabilityUnavailableMonthDayDto unavailable_month_day = 8;
    AvailabilityUnavailableYearMonthsDto unavailable_year_months = 9;
  }
}

message AvailabilityCompoundDto {
  AvailabilityTypeDto type = 1;
  repeated AvailabilityDto regras = 2;
}

message AvailabilityUnavailableWeekDayDto {
  AvailabilityTypeDto type = 1;
  WeekDayDto week_day = 2;
  TimeSlotDto slot = 3;
}

message AvailabilityUnavailableWeekDaysDto {
  AvailabilityTypeDto type = 1;
  repeated WeekDayDto week_days = 2;
  TimeSlotDto slot = 3;
}

message AvailabilityUnavailableTimeSlotDto {
  AvailabilityTypeDto type = 1;
  TimeSlotDto slot = 2;
}

message AvailabilityUnavailableSpecificDateDto {
  AvailabilityTypeDto type = 1;
  string date = 2; // date
  TimeSlotDto slot = 3;
}

message AvailabilityUnavailableDateRangeDto {
  AvailabilityTypeDto type = 1;
  string date_inicio = 2; // date
  string date_fim = 3;    // date
  TimeSlotDto slot = 4;
}

message AvailabilityUnavailableMonthDayDto {
  AvailabilityTypeDto type = 1;
  int32 month_day = 2;
  TimeSlotDto slot = 3;
}

message AvailabilityUnavailableYearMonthsDto {
  AvailabilityTypeDto type = 1;
  repeated int32 months = 2;
  TimeSlotDto slot = 3;
}
